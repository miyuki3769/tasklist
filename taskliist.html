<!DOCTYPE html>
<html>

<header>
    <title>Task List</title>
    <style type="text/css">
        .item-header {
            background-color: #7A991A;
            color: black;
        }
        
        .wrapper {
            background-color: blueviolet;
            color: aliceblue;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/query-result/0.1.3/query-result.js">
    </script>
</header>

<body>
    <div class='wrapper'>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <input type="text" id="add_title" placeholder="Anime Title">
        <input type="text" id="add_listid" placeholder="#ListID">
        <input type="button" id="add_anime" value="Add Anime">
    </div>
    <h3 class="item-header">Romance</h3>
    <ol id="romance">
        <li>Lovely Complex</li>
        <li>Kimi no Na Wa</li>
        <li>Say I Love You</li>
        <li>Clannad</li>
        <li>Clannad After Story</li>
        <li>Kamisama Hajimemashite</li>
        <li>Monthly Girl's Nazaki-kun</li>
        <li>Kimi ni Todoke</li>
        <li>Akagami no Shiragukihime</li>
        <li>Gosick</li>
        <li>Nisekoi</li>
        <li>Tonari no Kaibutsu-kun</li>
        <li>Full Moon</li>
    </ol>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#add_anime').click(function() {
                var title = $('#add_title').val();
                var html = '<li><span>' + title + '</span></li>';
                var listid = $('#add_listid').val();
                var num = 0
                add();

                function add() {
                    var listid = $('#add_listid').val();
                    var animeTitle = get_animeTitle();
                    animeTitle.push(title);
                    if (listid = listid) {
                        num += 1;
                    }
                    var listidNew = listid + '-' + num;
                    localStorage.setItem(listidNew, JSON.stringify(animeTitle));

                    show();
                }

                function show() {
                    var animeTitle = get_animeTitle();

                    var html = '<ul>';
                    for (var i = 0; i < animeTitle.length; i++) {
                        html += '<li>' + animeTitle[i] + '<button class="remove" id="' + animeTitle[i] + '">x</button></li>';
                    };
                    html += '</ul>';

                    document.getElementById(listidNew).innerHTML = html;

                    var buttons = document.getElementsByClassName('remove');
                    for (var i = 0; i < buttons.length; i++) {
                        buttons[i].addEventListener('click', remove);
                    };
                }

                $(listid).append(html);

                document.getElementById("add_title").value = "";
                document.getElementById("add_listid").value = "";
            })
        })

        function remove() {
            var id = this.getAttribute('id');
            var animeTitle = get_animeTitle();
            animeTitle.splice(id, 1);
            localStorage.setItem('anime', JSON.stringify(animeTitle));

            show();

            return false;
        }

        function get_animeTitle() {
            var animeTitle = new Array;
            var animeTitle_str = localStorage.getItem('anime');
            if (animeTitle_str != null) {
                animeTitle = JSON.parse(animeTitle_str);
            }
            return animeTitle;
        }
        alert('there are ' + localStorage.length + ' items in the storage array.');
    </script>
</body>

</html>